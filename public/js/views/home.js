// Generated by CoffeeScript 1.3.3
(function() {

  define(["views/AppView", 'app', 'views/Projects'], function(AppView, app) {
    return app.views.Home = AppView.extend({
      templateName: "home",
      additionalInitialize: function() {
        $("projects").bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function(e) {
          return console.log("transition end", e);
        });
        return _.bindAll(this);
      },
      events: {
        'click .main-page-squares': 'squareClicked',
        'click .name': 'nameClicked'
      },
      squareClicked: function(e) {
        var clickedDiv, transitionCss;
        clickedDiv = $(e.target);
        if (clickedDiv.hasClass('text')) {
          clickedDiv = clickedDiv.parent();
        }
        clickedDiv.addClass('selected');
        transitionCss = {
          width: '100%',
          height: '100%',
          'z-index': 50,
          top: 0,
          left: 0
        };
        /*
              if (clickedDiv.hasClass('projects'))
              else if (clickedDiv.hasClass('music'))
        
              else if (clickedDiv.hasClass('music'))
        */

        return clickedDiv.transition(transitionCss, this.squareTransitionFinished);
      },
      squareTransitionFinished: function() {
        $('.selected .text').transition({
          top: '0',
          'margin-top': 0
        });
        $('.name').transition({
          left: '10%'
        }, function() {
          return $('.name').html('V<span>S</span>');
        });
        this.selectedContentView = new app.views.Projects();
        return $('.selected .square-content').html(this.selectedContentView.render().el);
      },
      nameClicked: function() {
        return this.goToHome();
      },
      goToHome: function() {
        var selectedSquare, transitionCss;
        selectedSquare = $('.selected');
        $('.name').transition({
          left: '50%'
        }, function() {
          return $('.name').html('Varun <span>Singh</span>');
        });
        this.selectedContentView.destroy();
        transitionCss = {
          width: '50%',
          height: '50%',
          'z-index': 10
        };
        if (selectedSquare.hasClass('projects')) {
          transitionCss.top = 0;
          transitionCss.left = 0;
        } else if (selectedSquare.hasClass('music')) {
          transitionCss.top = 0;
          transitionCss.left = '50%';
        } else if (selectedSquare.hasClass('about')) {
          transitionCss.bottom = 0;
          transitionCss.left = 0;
        } else if (selectedSquare.hasClass('contact')) {
          transitionCss.bottom = 0;
          transitionCss.left = '50%';
        }
        return $('.selected .text').transition({
          top: '50%'
        }, function() {
          selectedSquare.transition(transitionCss);
          selectedSquare.find('.text').transition({
            'margin-top': '-50px'
          });
          return selectedSquare.removeClass('selected');
        });
      }
    });
  });

}).call(this);
